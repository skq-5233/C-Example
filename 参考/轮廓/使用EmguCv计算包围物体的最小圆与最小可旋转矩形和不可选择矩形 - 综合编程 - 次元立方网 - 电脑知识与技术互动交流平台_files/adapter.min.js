(function() {
    
    var modules = {};
    function isFunction(obj) {
        return Object.prototype.toString.call(obj) === "[object Function]";
    }
    function define(name, deps, factory) {
        if (modules[name]) {
            throw new Error("Module " + name + " has been defined already.");
        }
        if (isFunction(deps)) {
            factory = deps;
        }
        modules[name] = {
            factory: factory,
            inited: false,
            exports: null
        };
    }
    function run(name) {
        var module, exports, mod, ret;
        module = modules[name];
        exports = {};
        mod = {
            exports: {}
        };
        if (isFunction(module.factory)) {
            ret = module.factory.call(undefined, require, exports, mod);
            if (ret !== undefined) {
                module.exports = ret;
            } else {
                if (mod.hasOwnProperty("exports") && typeof mod.exports === "object" && mod.exports instanceof Object === true) {
                    var tag = false;
                    var k, v;
                    for (k in mod.exports) {
                        if (mod.exports.hasOwnProperty(k)) {
                            tag = true;
                        }
                    }
                    if (tag === false) {
                        module.exports = exports;
                    } else {
                        module.exports = mod.exports;
                    }
                } else {
                    module.exports = mod.exports;
                }
            }
        } else {
            throw new Error("Module " + name + " has no factory.");
        }
        module.inited = true;
    }
    function require(name) {
        var module;
        module = modules[name];
        if (!module) {
            throw new Error("Module " + name + " is not defined.");
        }
        if (module.inited === false) {
            run(name);
        }
        return module.exports;
    }
    define("/opt/jenkins/workspace/changyan-fe-cyf-v3/v3/src/adapter.js", function(require, exports, module) {
        var $$util = require("/opt/jenkins/workspace/changyan-fe-cyf-v3/v3/src/util/util.js");
        var fnGetBeConfig = function(base, appid, fn) {
            var cb = "changyan" + Math.floor(Math.random() * 1e3 * 1e3 * 1e3);
            var api = base + "api/2/config/get/" + appid + "?callback=" + cb;
            window[cb] = function(data) {
                if (typeof fn === "function") {
                    fn(data);
                }
            };
            $$util.loadJs(api, function() {
                $$util.deleteProperty(window, cb);
            });
        };
        var fnAdapter = function(config, cookie) {
            var feConfig = require("/opt/jenkins/workspace/changyan-fe-cyf-v3/v3/src/fe-config.js");
            fnGetBeConfig(config.api, feConfig.appid, function(beConfig) {
                $$util.deleteProperty(config, "version");
                $$util.deleteProperty(feConfig, "conf");
                config.isvName = beConfig.data.isv.name;
                config.isvAuditMode = beConfig.data.isv.auditMode;
                config.isvStatus = beConfig.data.isv.status;
                config.isvUrl = beConfig.data.isv.url;
                beConfig = beConfig.data && beConfig.data.main || {};
                if (beConfig.is_new_cdn === "true") {
                    config.res = config.res.replace("changyan.itc.cn", "a9720e8c2dac4.cdn.sohucs.com");
                }
                if (beConfig.allow_phoneuser === "1") {
                    if (beConfig.login_external_platform) {
                        if (beConfig.login_external_platform !== "") {
                            beConfig.login_external_platform = beConfig.login_external_platform + ",15";
                        } else {
                            beConfig.login_external_platform = "15";
                        }
                    }
                    $$util.deleteProperty(beConfig, "allow_phoneuser");
                }
                var key;
                for (key in beConfig) {
                    if (beConfig.hasOwnProperty(key) && key.match(/^mobile/)) {
                        $$util.deleteProperty(beConfig, key);
                    }
                }
                if (beConfig.code_version !== "v3") {
                    $$util.loadJs(config.protocol + "changyan.sohu.com/upload/version.js");
                    return;
                }
                if (config.protocol === "https://") {
                    config.res = config.res.replace("changyan.itc.cn", "changyan.sohu.com");
                }
                if (cookie.debug_v3 === "true") {
                    require.async("./start.js", function(start) {
                        start(config, feConfig, beConfig, cookie);
                    });
                } else {
                    $$util.loadJs(config.res + "start.min.js", function() {
                        var start = window.changyan.api.getModules("start.js");
                        start(config, feConfig, beConfig, cookie);
                    });
                }
                $$util.deleteProperty(config, "debug");
            });
        };
        module.exports = fnAdapter;
    });
    define("/opt/jenkins/workspace/changyan-fe-cyf-v3/v3/src/util/util.js", function(require, exports, module) {
        exports.loadJs = function(src, fun) {
            var head = document.getElementsByTagName("head")[0] || document.head || document.documentElement;
            var script = document.createElement("script");
            script.setAttribute("type", "text/javascript");
            script.setAttribute("charset", "UTF-8");
            script.setAttribute("src", src);
            if (typeof fun === "function") {
                if (window.attachEvent) {
                    script.onreadystatechange = function() {
                        var r = script.readyState;
                        if (r === "loaded" || r === "complete") {
                            script.onreadystatechange = null;
                            fun();
                        }
                    };
                } else {
                    script.onload = fun;
                }
            }
            head.appendChild(script);
        };
        exports.trim = function() {
            var trimLeft = /^\s+/;
            var trimRight = /\s+$/;
            var trim = String.prototype.trim;
            return trim ? function(text) {
                return text === null ? "" : trim.call(text);
            } : function(text) {
                return text === null ? "" : text.toString().replace(trimLeft, "").replace(trimRight, "");
            };
        }();
        exports.deleteProperty = function(obj, key) {
            if (typeof obj !== "object") {
                return;
            }
            try {
                delete obj[key];
            } catch (e) {
                obj[key] = undefined;
            }
        };
        exports.queryObject = function(obj) {
            if (typeof obj !== "object") {
                return;
            }
            var str = "", key;
            for (key in obj) {
                if (str === "") {
                    str += key + "=" + window.decodeURIComponent(obj[key]);
                } else {
                    str += "&" + key + "=" + window.decodeURIComponent(obj[key]);
                }
            }
            return str;
        };
    });
    define("/opt/jenkins/workspace/changyan-fe-cyf-v3/v3/src/fe-config.js", function(require, exports, module) {
        var isv = {
            _version: null,
            _script: {},
            _config: {},
            _pageConfig: {},
            _readyHandles: [],
            _useIframe: null,
            _sid: null,
            _url: null,
            _title: null
        };
        (function() {
            (function() {
                var getStartScript = function() {
                    var scripts = document.getElementsByTagName("script"), i, currentScript;
                    for (i = 0; i < scripts.length; i++) {
                        if (/changyan\.js/gi.test(scripts[i].src) || /changyan-plus\.js/gi.test(scripts[i].src)) {
                            currentScript = scripts[i];
                            break;
                        }
                    }
                    return currentScript;
                };
                var getUrlParams = function(url) {
                    var obj = {};
                    if (!url || typeof url !== "string") {
                        return obj;
                    }
                    var paramStr = url.split("?")[1] || "";
                    var paramArr = paramStr.split("&");
                    var i, subArr;
                    if (paramArr.length) {
                        for (i = 0; i < paramArr.length; i++) {
                            subArr = paramArr[i].split("=");
                            if (!obj[subArr[0]]) {
                                obj[subArr[0]] = subArr[1];
                            }
                        }
                    }
                    return obj;
                };
                var script = getStartScript();
                var url = script && script.src || "";
                var params = getUrlParams(url);
                isv._script.appid = params.appid;
                isv._script.conf = params.conf;
            })();
            if (typeof window._config === "object") {
                isv._config = window._config || {};
            }
            if (window.changyan && window.changyan.api && window.changyan.api.tmpIsvPageConfig) {
                isv._pageConfig = window.changyan.api.tmpIsvPageConfig || {};
            }
            if (window.changyan && window.changyan.api && window.changyan.api.tmpHandles) {
                isv._readyHandles = window.changyan.api.tmpHandles || [];
            }
            (function() {
                if (window.SCS_NO_IFRAME === true) {
                    isv._useIframe = false;
                } else {
                    if (window.changyan && window.changyan.api && window.changyan.api.tmpIsvPageConfig) {
                        isv._useIframe = false;
                    } else {
                        isv._useIframe = true;
                    }
                }
            })();
            (function() {
                var el = window.document.getElementById("SOHUCS");
                try {
                    isv._sid = el.getAttribute("sid");
                } catch (e) {}
            })();
            isv._url = window.location.href;
            isv._title = window.document.title;
            (function() {
                var $$util = require("/opt/jenkins/workspace/changyan-fe-cyf-v3/v3/src/util/util.js");
            })();
        })();
        var frontEndParams = {};
        (function() {
            frontEndParams.appid = isv._pageConfig.appid || isv._script.appid;
            frontEndParams.conf = isv._pageConfig.conf || isv._script.conf;
            frontEndParams.useIframe = isv._useIframe;
            frontEndParams.sid = isv._sid;
            frontEndParams.url = isv._url;
            frontEndParams.title = isv._title;
            if (isv._config.categoryId !== undefined) {
                frontEndParams.categoryId = isv._config.categoryId;
            }
            if (isv._config.ymUpdate !== undefined) {
                frontEndParams.ymUpdate = isv._config.ymUpdate;
            }
            if (isv._config.indentStyle !== undefined) {
                frontEndParams.indentStyle = isv._config.indentStyle;
            }
            if (isv._config.floatStyle !== undefined) {
                frontEndParams.floatStyle = isv._config.floatStyle;
            }
            frontEndParams.displayFloatBar = isv._pageConfig.displayFloatBar === false ? false : true;
            frontEndParams.smallerVersion = isv._pageConfig.smallerVersion === true ? true : false;
            frontEndParams.simpleCbox = isv._pageConfig.simpleCbox === true ? true : false;
            frontEndParams.readyHandles = isv._readyHandles || [];
        })();
        module.exports = frontEndParams;
    });
    run("/opt/jenkins/workspace/changyan-fe-cyf-v3/v3/src/adapter.js");
        window.changyan.api.getAdapterModules = function (module) {            var key = "/opt/jenkins/workspace/changyan-fe-cyf-v3/v3/src/" + module;            return require(key);        };        }());    